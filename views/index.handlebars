<div class="container h-100">
  <div class="row h-100 justify-content-center align-items-center">
    <div class="row w-50 justify-content-center align-items-center">
      <form class="col-12 row justify-content-center mt-5" action="/filter">
        <input type="month" name="date" class="col-5 mr-3" onchange="this.form.submit()" value="{{date}}">
        <select name="filter" style="width: 30rem;" class="p-2 col-5" onchange="this.form.submit()">
          {{#if query}}<option value="">{{query}}</option>{{else}}<option value="">類別</option>{{/if}}
          {{#each category}}
          <option value="{{this.category}}">{{this.category}}</option>
          {{/each }}
        </select>
      </form>

      <div class="col-12 row justify-content-center mt-4">
        <p style="font-size: 1.5rem;" class="mr-5">總金額 : </p>
        <p style="font-size: 5rem; color:orange;" class="ml-5">{{totalAmount}}</p>
      </div>

      {{#each recordRefactor}}
      <div class="list-group col-12 m-1 p-2 border border-secondary"
        {{#if this.judgeStyle}}style="background-color:grey;" {{/if}}>
        <div class="row justify-content-between align-items-center">
          <div class="row justify-content-between align-items-center ml-5">
            <i class="{{this.icon}}" style="font-size: 3rem; width: 5rem;"></i>
            <div>
              <p class="mb-0">{{this.name}}</p>
              <p class="mb-0">{{this.date}}</p>
            </div>
          </div>
          <p class="mr-5 mb-0">{{this.amount}}</p>
        </div>
        <div style="position: absolute; left: 590px; top: 9px; width: 200px;" class="">
          <a href="/{{this._id}}" class="mr-3 btn btn-primary" style="font-size: 1.4rem;">修改</a>
          <button type="button" class="mr-3 btn btn-danger" data-toggle="modal" data-target="#a{{this._id}}"
            style="font-size: 1.4rem;">
            刪除
          </button>
        </div>
      </div>

      <!-- Modal -->
      <div class="modal fade" id="a{{this._id}}" data-backdrop="static" data-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="staticBackdropLabel">Warning!!!</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              確定要刪除 {{this.name}} !?
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <form action="/{{this._id}}?_method=DELETE" method="POST">
                <button type="submit" class="btn btn-primary">Delete</button>
              </form>
            </div>
          </div>
        </div>
      </div>
      {{/each }}

      <a href="/new" class="btn btn-primary my-3" style="width: 250px;">新增支出</a>
    </div>
  </div>
</div>